import { Table, Td, Th, Tr } from 'nextra/components'

# Errors
Your SimplifyTrip API integration may need to handle errors at runtime. These errors generally fall into these categories:

- **Content errors** happen when request payload is invalid. They return HTTP 4xx responses. Example: `401` for invalid API key, or `400` for missing required parameter.

- **Network errors** happen when communication between client and server is interrupted. They usually appear as low-level errors such as socket exceptions or timeouts. A network error does not always mean the request failed at server side.

- **Server errors** happen when issues occur on SimplifyTrip servers. They return HTTP 5xx responses. These are rare, but integrations must still handle them safely.

The right handling strategy depends on the error type.

### HTTP Status Code

SimplifyTrip uses standard HTTP response codes to indicate API request success and failure:
- `2xx`: success
- `4xx`: client-side/request errors
- `5xx`: server-side errors

###### HTTP status codes for successful requests

<Table className="mt-5">
  <thead>
    <Tr>
      <Th align="center">HTTP Status</Th>
      <Th>Meaning</Th>
    </Tr>
  </thead>
  <tbody>
    <Tr>
      <Td align="center">200</Td>
      <Td>OK - Request processed successfully. Default status for most GET requests.</Td>
    </Tr>
    <Tr>
      <Td align="center">201</Td>
      <Td>Created - Resource created successfully. Default status for most POST requests.</Td>
    </Tr>
    <Tr>
      <Td align="center">204</Td>
      <Td>No Content - Resource deleted successfully. Default status for most DELETE requests.</Td>
    </Tr>
  </tbody>
</Table>

###### HTTP status codes for failed requests

<Table className='mt-5'>
  <thead>
    <Tr>
      <Th>HTTP Status</Th>
      <Th>Meaning</Th>
    </Tr>
  </thead>
  <tbody>
    <Tr>
      <Td align="center">400</Td>
      <Td>Bad Request - Invalid request payload or request format.</Td>
    </Tr>
    <Tr>
      <Td align="center">401</Td>
      <Td>Unauthorized - API key missing, expired, or invalid.</Td>
    </Tr>
    <Tr>
      <Td align="center">403</Td>
      <Td>Forbidden - API key does not have permission for this resource.</Td>
    </Tr>
    <Tr>
      <Td align="center">404</Td>
      <Td>Not Found - Requested resource does not exist or has been deleted.</Td>
    </Tr>
    <Tr>
      <Td align="center">405</Td>
      <Td>Method Not Allowed - HTTP method is not supported by this endpoint.</Td>
    </Tr>
    <Tr>
      <Td align="center">422</Td>
      <Td>Unprocessable Entity - Request data is semantically invalid.</Td>
    </Tr>
    <Tr>
      <Td align="center">429</Td>
      <Td>Too Many Requests - Request rate exceeded the limit.</Td>
    </Tr>
    <Tr>
      <Td align="center">500</Td>
      <Td>Internal Server Error - Unexpected server-side issue.</Td>
    </Tr>
    <Tr>
      <Td align="center">503</Td>
      <Td>Service Unavailable - Service is temporarily unavailable (maintenance or outage).</Td>
    </Tr>
  </tbody>
</Table>

###### Error codes

<Table className='mt-5 w-full'>
  <thead>
    <Tr>
      <Th>Error Code</Th>
      <Th width="100%">Meaning</Th>
    </Tr>
  </thead>
  <tbody>
    <Tr>
      <Td>TOO_MANY_REQUESTS</Td>
      <Td>Rate limit exceeded.</Td>
    </Tr>
    <Tr>
      <Td>BAD_REQUEST</Td>
      <Td>Invalid request parameters.</Td>
    </Tr>
    <Tr>
      <Td>UNAUTHORIZED</Td>
      <Td>API key is missing or invalid, request cannot be authenticated.</Td>
    </Tr>
    <Tr>
      <Td>FORBIDDEN</Td>
      <Td>API key does not have permission to perform this request.</Td>
    </Tr>
    <Tr>
      <Td>INTERNAL_SERVER_ERROR</Td>
      <Td>Unexpected internal API error (rare).</Td>
    </Tr>
  </tbody>
</Table>

### Error Handling
###### Safely retry requests with idempotency

Idempotency means an operation can be applied multiple times with the same result as the first successful attempt. This is critical when network interruptions happen and request status is uncertain.

SimplifyTrip guarantees idempotency for GET requests. For POST/PATCH, use an Idempotency key to avoid duplicate operations. Example: if create order times out, retrying with the same Idempotency key prevents duplicate orders.

Idempotency key is sent in request headers. Common strategies:

- Generate a random token such as `UUID v4`
- Derive key from user-owned object IDs (for example cart ID)

###### Content errors
Content errors are 4xx errors caused by invalid request payload. Fix the payload and retry.

For POST with Idempotency key: once request execution starts, SimplifyTrip can store the result for that key, including 4xx responses. If you change the payload, create a new Idempotency key.

###### Network errors
Network errors are connection-level failures such as socket or timeout exceptions.

When network interruptions occur, retry with the **same** Idempotency key and same parameters until a definitive server response is received. Reusing the same key with different parameters causes a mismatch error.

###### Server errors
Server errors are 5xx responses. They are the hardest to handle and should be considered non-deterministic.

Retrying with the same Idempotency key often returns a similar result. Retrying with a new key may create side effects, so it is usually not recommended unless you fully understand the request behavior.
